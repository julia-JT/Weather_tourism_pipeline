# Weather_tourism_pipeline
Данный пайплайн создан на основе данных от https://openweathermap.org.
Структура слоев следующая:
  1) слой raw: 
  собираем данные как есть, фиксируем дату загрузки в названии файлов.
  2) слой cleaned:
  очищаем данные слоя raw, группируем их по файлам за каждый день.
  3) слой enriched:
  обогащаем данные дополнительной информацией из справочника cities_reference.csv и формируем условие дневных и ночных температур,
  группируем загрузки также по дням, внутри ежедневного файла можно ориентироваться по дате загрузки as_of_date, чтобы отследить изменения внутри дня.
  4) слой aggregated:
   содержит витрины данных, тут файлы без дат в названии, даты сохранились внутри файла в поле as_of_date, это позволняет отслеживать динамику изменений.
  6) созданы дополнительные слои models и visualizations, в которых формируется предсказания погоды на завтра и визуализации для этой страницы.
  Пока не удалось победить: Сейчас на этой страницы отображается инфомрацию из витрин на максимальную as_of_date + визуализации с динамикой модельного прогноза температуры, 
  но не отображаются графики из generate_visualizations.py.
<!-- WEATHER DATA START -->
### Данные о погоде

#### Графики
![Comfort Index Trend](data/visualizations/comfort_index_trend.png)

[Forecasted Day Temperature](data/visualizations/forecasted_day_temperature.html)

[Forecasted Night Temperature](data/visualizations/forecasted_night_temperature.html)

[Historical Day Temperature](data/visualizations/historical_day_temperature.html)

[Historical Night Temperature](data/visualizations/historical_night_temperature.html)

![Temperature Day](data/visualizations/temperature_day.png)

![Temperature Night](data/visualizations/temperature_night.png)

#### Рейтинг туризма по городам
| city_name       |   avg_comfort_index | recommended_activity   | tourist_season_match   | tourism_season   | tour_recommendation       | as_of_date          |
|:----------------|--------------------:|:-----------------------|:-----------------------|:-----------------|:--------------------------|:--------------------|
| Новосибирск     |               -7    | домашний отдых         | нет                    | Июнь-Август      | домашний отдых вне сезона | 2025-10-10 16:37:00 |
| Москва          |                0.04 | домашний отдых         | да                     | Круглогодично    | домашний отдых в сезон    | 2025-10-10 16:37:00 |
| Казань          |                5.79 | домашний отдых         | нет                    | Май-Сентябрь     | домашний отдых вне сезона | 2025-10-10 16:37:00 |
| Санкт-Петербург |                6.18 | домашний отдых         | нет                    | Май-Сентябрь     | домашний отдых вне сезона | 2025-10-10 16:37:00 |
| Сочи            |                6.32 | домашний отдых         | да                     | Май-Октябрь      | домашний отдых в сезон    | 2025-10-10 16:37:00 |

#### Сводка по федеральным округам
| federal_district   |   avg_temperature |   comfortable_cities_count | general_recommendation   | as_of_date          |
|:-------------------|------------------:|---------------------------:|:-------------------------|:--------------------|
| Приволжский        |             11.3  |                          0 | Лучше остаться дома      | 2025-10-10 16:37:00 |
| Центральный        |             12.68 |                          0 | Лучше остаться дома      | 2025-10-10 16:37:00 |
| Сибирский          |             -0.18 |                          0 | Лучше остаться дома      | 2025-10-10 16:37:00 |
| Северо-Западный    |             11.32 |                          0 | Лучше остаться дома      | 2025-10-10 16:37:00 |
| Южный              |             19.82 |                          0 | Лучше остаться дома      | 2025-10-10 16:37:00 |

#### Рекомендации для путешествий
Рекомендации на 2025-10-10: top_3_cities: nan, stay_home_cities: Казань, Москва, Новосибирск, Санкт-Петербург, Сочи, additional_notes: Казань: Плохая видимость из-за тумана/облачности; Москва: Плохая видимость из-за тумана/облачности; Новосибирск: Взять теплую одежду; Очень холодно, риск обморожения; Плохая видимость из-за тумана/облачности

#### Прогнозы температуры
| city            | forecast_date   |   predicted_temp_day |   predicted_temp_night | model_type       | as_of_date          |
|:----------------|:----------------|---------------------:|-----------------------:|:-----------------|:--------------------|
| Казань          | 2025-10-11      |                    9 |                      9 | LinearRegression | 2025-10-10 16:37:23 |
| Москва          | 2025-10-11      |                    6 |                      9 | LinearRegression | 2025-10-10 16:37:23 |
| Новосибирск     | 2025-10-11      |                   -4 |                     21 | LinearRegression | 2025-10-10 16:37:23 |
| Санкт-Петербург | 2025-10-11      |                    8 |                     10 | LinearRegression | 2025-10-10 16:37:23 |
| Сочи            | 2025-10-11      |                   12 |                      3 | LinearRegression | 2025-10-10 16:37:23 |


<!-- WEATHER DATA END -->
